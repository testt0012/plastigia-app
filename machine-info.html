<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Responsive design -->
    <title>Πληροφορίες Μηχανής - Plastigia</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
            background-color: #FFFFFF;
            color: #000000;
        }
        .header {
            position: relative;
            background-color: #ed1c24; /* Νέο κόκκινο χρώμα */
            padding: 10px; /* Μειωμένο padding για μικρότερο πλάτος */
            color: #FFFFFF;
            width: 90%; /* Περιορισμός πλάτους */
            margin: 0 auto; /* Κεντράρισμα */
            min-height: 40px; /* Ελάχιστο ύψος για τη μπάρα */
        }
        .logo {
            max-width: 300px; /* Αυξημένο μέγεθος λογοτύπου */
            margin: 10px auto; /* Περιθώριο για κεντράρισμα */
        }
        .menu-btn {
            position: absolute;
            top: 0;
            right: 0;
            padding: 0; /* Καθαρό padding για πλήρες ύψος */
            background-color: #ed1c24; /* Νέο κόκκινο χρώμα */
            color: #FFFFFF;
            border: none;
            cursor: pointer;
            border-radius: 0 10px 10px 0; /* Ακριαία στρογγυλά μόνο στα δεξιά */
            font-size: 20px;
            width: 50px; /* Σταθερό πλάτος για τη γωνία */
            height: 100%; /* Πλήρες ύψος της μπάρας */
            box-sizing: border-box; /* Περιλαμβάνει padding στο ύψος/πλάτος */
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .menu-btn:hover {
            background-color: #c91820; /* Σκιά χρώματος για hover */
        }
        .back-btn {
            position: absolute;
            top: 0;
            left: 0;
            padding: 0; /* Καθαρό padding για πλήρες ύψος */
            background-color: #ed1c24; /* Νέο κόκκινο χρώμα */
            color: #FFFFFF;
            border: none;
            cursor: pointer;
            border-radius: 10px 0 0 10px; /* Ακριαία στρογγυλά μόνο στα αριστερά */
            font-size: 20px;
            width: 50px; /* Σταθερό πλάτος για τη γωνία */
            height: 100%; /* Πλήρες ύψος της μπάρας */
            box-sizing: border-box; /* Περιλαμβάνει padding στο ύψος/πλάτος */
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .back-btn:hover {
            background-color: #c91820; /* Σκιά χρώματος για hover */
        }
        .sidebar {
            height: 100%;
            width: 0;
            position: fixed;
            top: 0;
            right: 0;
            background-color: #ed1c24; /* Νέο κόκκινο χρώμα */
            overflow-x: hidden;
            transition: 0.5s;
            padding-top: 60px;
            z-index: 1;
        }
        .sidebar a {
            padding: 15px 20px;
            text-decoration: none;
            font-size: 20px;
            color: #FFFFFF;
            display: block;
            transition: 0.3s;
        }
        .sidebar a:hover {
            background-color: #c91820; /* Σκιά χρώματος για hover */
        }
        .sidebar .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
            padding: 10px;
            background: none;
            border: none;
            color: #FFFFFF;
            cursor: pointer;
        }
        .container {
            max-width: 90%;
            margin: 20px auto;
            padding: 20px;
            border: 2px solid #ed1c24; /* Νέο κόκκινο χρώμα */
            border-radius: 15px;
        }
        .section {
            margin-bottom: 20px;
            text-align: ${role === 'user' ? 'left' : 'right'};
        }
        h2 {
            color: #ed1c24; /* Νέο κόκκινο χρώμα */
            font-size: 24px;
            margin-bottom: 15px;
        }
        .admin-info span {
            font-weight: bold;
            color: #ed1c24; /* Νέο κόκκινο χρώμα */
            font-size: 18px;
        }
        .input-row {
            display: flex;
            align-items: center;
            justify-content: ${role === 'user' ? 'flex-start' : 'flex-end'};
            margin: 10px 0;
        }
        label {
            display: inline-block;
            width: 70%;
            margin-left: ${role === 'user' ? '0' : '10px'};
            margin-right: ${role === 'user' ? '10px' : '0'};
            text-align: left;
            font-weight: bold;
            font-size: 18px;
        }
        input {
            width: 25%;
            padding: 12px;
            font-size: 18px;
            border: 2px solid #ed1c24; /* Νέο κόκκινο χρώμα */
            border-radius: 10px;
            display: inline-block;
            vertical-align: middle;
        }
        input[type="number"] {
            width: 25%;
        }
        input[readonly] {
            background-color: #f0f0f0;
            cursor: not-allowed;
        }
        button {
            padding: 15px 30px;
            background-color: #ed1c24; /* Νέο κόκκινο χρώμα */
            color: #FFFFFF;
            border: none;
            cursor: pointer;
            border-radius: 10px;
            font-size: 20px;
            margin-top: 15px;
        }
        button:hover {
            background-color: #c91820; /* Σκιά χρώματος για hover */
        }
        .hidden {
            display: none;
        }
        .prep-material-btn {
            padding: 10px 20px;
            background-color: #ed1c24; /* Νέο κόκκινο χρώμα */
            color: #FFFFFF;
            border: none;
            cursor: pointer;
            border-radius: 10px;
            font-size: 18px;
            margin-top: 15px;
        }
        .prep-material-btn:hover {
            background-color: #c91820; /* Σκιά χρώματος για hover */
        }
        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }
            .header {
                padding: 5px; /* Περαιτέρω μείωση σε κινητό */
                width: 95%; /* Λίγο μεγαλύτερο πλάτος σε κινητό */
                min-height: 35px; /* Προσαρμογή ελάχιστου ύψους σε κινητό */
            }
            .logo {
                max-width: 250px; /* Μικρότερο μέγεθος σε κινητό */
            }
            .menu-btn, .back-btn {
                padding: 0;
                font-size: 18px;
                width: 45px; /* Λίγο μικρότερο πλάτος σε κινητό */
            }
            label {
                font-size: 16px;
            }
            input {
                width: 40%;
                padding: 10px;
                font-size: 16px;
            }
            button {
                padding: 12px 25px;
                font-size: 18px;
            }
            .prep-material-btn {
                padding: 8px 15px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <button class="back-btn" onclick="goBack()">Πίσω</button>
        <img src="logo.png" alt="Plastigia Logo" class="logo">
        <button class="menu-btn" onclick="openSidebar()">☰</button>
    </div>
    <div class="container" id="container">
        <h2>Πληροφορίες Μηχανής</h2>
        <div class="section">
            <div class="input-row"><label>Πελάτης:</label><input type="text" id="client" placeholder="Όνομα πελάτη" ${role === 'user' ? 'readonly' : ''}></div>
            <div class="input-row"><label>Καλούπι:</label><input type="text" id="mold" placeholder="Κωδικός ή όνομα καλουπιού" ${role === 'user' ? 'readonly' : ''}></div>
            <div class="input-row"><label>Ημερομηνία Παράδοσης:</label><input type="date" id="deliveryDate" ${role === 'user' ? 'readonly' : ''}></div>
        </div>
        <h2>Στοιχεία Καλουπιού</h2>
        <div class="section">
            <div class="input-row"><label>Δευτ/Πάτημα:</label><input type="number" id="cyclesPerShot" placeholder="Δευτ." ${role === 'user' ? 'readonly' : ''}></div>
            <div class="input-row"><label>gr/Πάτημα:</label><input type="number" id="gramsPerShot" placeholder="gr" ${role === 'user' ? 'readonly' : ''}></div>
            <div class="input-row"><label>gr/αντικειμένου:</label><input type="number" id="gramsPerItem" placeholder="gr" ${role === 'user' ? 'readonly' : ''}></div>
            <div class="input-row"><label>τμχ/πάτημα:</label><input type="number" id="itemsPerShot" placeholder="τμχ" ${role === 'user' ? 'readonly' : ''}></div>
            <div class="input-row"><label>Βουλωμένες Κοιλότητες:</label><input type="number" id="blockedCavities" placeholder="Αριθμός" ${role === 'user' ? 'readonly' : ''}></div>
            <div class="input-row"><label>Υλικό:</label><input type="text" id="material" placeholder="Τύπος υλικού" ${role === 'user' ? 'readonly' : ''}></div>
            <div class="input-row"><label>Μηχανή:</label><p><span class="admin-info">${machineName || 'Άγνωστη Μηχανή'}</span></p></div>
        </div>
        <h2>Στοιχεία Παραγγελίας</h2>
        <div class="section">
            <div class="input-row"><label>Τεμάχια:</label><input type="number" id="items" placeholder="Πληκτρολόγησε τεμάχια" ${role === 'user' ? 'readonly' : ''}></div>
            <div class="input-row"><label>Σύνολο Υλικού:</label><input type="number" id="totalMaterial" placeholder="Πληκτρολόγησε γραμμάρια" ${role === 'user' ? 'readonly' : ''}></div>
            <div class="input-row"><label>Χρώμα:</label><input type="text" id="color" placeholder="Πληκτρολόγησε χρώμα" ${role === 'user' ? 'readonly' : ''}></div>
            <div class="input-row"><label>Ώρες:</label><input type="number" id="hours" placeholder="Πληκτρολόγησε ώρες" ${role === 'user' ? 'readonly' : ''}></div>
        </div>
        <h2>Στοιχεία Παράδοσης</h2>
        <div class="section">
            <div class="input-row"><label>Ώρα Έναρξης:</label><input type="text" id="startTime" placeholder="π.χ. 14:30" ${role === 'user' ? 'readonly' : ''}></div>
            <div class="input-row"><label>Ενδεικτική Ώρα Λήξης:</label><input type="text" id="estimatedEndTime" placeholder="π.χ. 18:00" ${role === 'user' ? 'readonly' : ''}></div>
        </div>
        <h2>Στοιχεία Συσκευασίας</h2>
        <div class="section">
            <div class="input-row"><label>τμχ/σακουλάκι:</label><input type="number" id="itemsPerBag" placeholder="Πληκτρολόγησε τεμάχια" ${role === 'user' ? 'readonly' : ''}></div>
            <div class="input-row"><label>Σακουλάκι:</label><input type="number" id="bags" placeholder="Πληkτρολόγησε αριθμό σακουλιών" ${role === 'user' ? 'readonly' : ''}></div>
        </div>
        <div ${role === 'user' ? '' : 'style="display: none;"'}>
            <button class="prep-material-btn" onclick="openMaterialPrep()">Φόρμα Προετοιμασίας Υλικού</button>
        </div>
        <div>
            <button onclick="saveData()" id="saveButton" ${role === 'user' ? 'style="display: none;"' : ''}>Αποθήκευση</button>
            <button onclick="newOrder()" id="newOrderButton" ${role === 'user' ? 'style="display: none;"' : ''} style="margin-left: 10px;">Νέα Παραγγελία</button>
        </div>
    </div>
    <div id="sidebar" class="sidebar">
        <button class="close-btn" onclick="closeSidebar()">×</button>
        <a href="welcome.html">Μηχανές</a>
        <a href="#">Παραγγελίες Φασόν</a>
        <a href="#">Παραγγελίες Plastigia</a>
        <a href="#">Inventory</a>
        <div id="adminOptions" style="display: none;">
            <a href="#">Καλούπια</a>
            <a href="#">Παραγγελίες Υλικών</a>
        </div>
        <a href="#" onclick="logout()">Αποσύνδεση</a>
    </div>
    <script>
        // Έλεγχος ρόλου
        const role = sessionStorage.getItem('role');
        if (!role) {
            alert('Πρέπει να συνδεθείτε!');
            window.location.href = "index.html";
        }

        // Λήψη παραμέτρου από το URL (όνομα μηχανής)
        const urlParams = new URLSearchParams(window.location.search);
        const machineName = urlParams.get('name');

        // Φόρτωση δεδομένων από το localStorage
        const data = JSON.parse(localStorage.getItem('machineData_' + machineName)) || {};
        if (role === 'user') {
            // Για user, εμφάνιση δεδομένων ως κείμενο
            document.getElementById('container').innerHTML = `
                <h2>Πληροφορίες Μηχανής</h2>
                <div class="section">
                    <div class="input-row"><label>Πελάτης:</label><p><span class="admin-info">${data.client || 'Δεν ορίστηκε'}</span></p></div>
                    <div class="input-row"><label>Καλούπι:</label><p><span class="admin-info">${data.mold || 'Δεν oρίστηκε'}</span></p></div>
                    <div class="input-row"><label>Ημερομηνία Παράδοσης:</label><p><span class="admin-info">${data.deliveryDate || 'Δεν ορίστηκε'}</span></p></div>
                </div>
                <h2>Στοιχεία Καλουπιού</h2>
                <div class="section">
                    <div class="input-row"><label>Δευτ/Πάτημα:</label><p><span class="admin-info">${data.cyclesPerShot || 'Δεν oρίστηκε'}</span></p></div>
                    <div class="input-row"><label>gr/Πάτημα:</label><p><span class="admin-info">${data.gramsPerShot || 'Δεν oρίστηκε'}</span></p></div>
                    <div class="input-row"><label>gr/αντικειμένου:</label><p><span class="admin-info">${data.gramsPerItem || 'Δεν oρίστηκε'}</span></p></div>
                    <div class="input-row"><label>τμχ/πάτημα:</label><p><span class="admin-info">${data.itemsPerShot || 'Δεν oρίστηκε'}</span></p></div>
                    <div class="input-row"><label>Βουλωμένες Κοιλότητες:</label><p><span class="admin-info">${data.blockedCavities || 'Δεν oρίστηκε'}</span></p></div>
                    <div class="input-row"><label>Υλικό:</label><p><span class="admin-info">${data.material || 'Δεν oρίστηκε'}</span></p></div>
                    <div class="input-row"><label>Μηχανή:</label><p><span class="admin-info">${machineName || 'Άγνωστη Μηχανή'}</span></p></div>
                </div>
                <h2>Στοιχεία Παραγγελίας</h2>
                <div class="section">
                    <div class="input-row"><label>Τεμάχια:</label><p><span class="admin-info">${data.items || 'Δεν oρίστηκε'}</span></p></div>
                    <div class="input-row"><label>Σύνολο Υλικού:</label><p><span class="admin-info">${data.totalMaterial || 'Δεν oρίστηκε'}</span></p></div>
                    <div class="input-row"><label>Χρώμα:</label><p><span class="admin-info">${data.color || 'Δεν oρίστηκε'}</span></p></div>
                    <div class="input-row"><label>Ώρες:</label><p><span class="admin-info">${data.hours || 'Δεν oρίστηκε'}</span></p></div>
                </div>
                <h2>Στοιχεία Παράδοσης</h2>
                <div class="section">
                    <div class="input-row"><label>Ώρα Έναρξης:</label><p><span class="admin-info">${data.startTime || 'Δεν oρίστηκε'}</span></p></div>
                    <div class="input-row"><label>Ενδεικτική Ώρα Λήξης:</label><p><span class="admin-info">${data.estimatedEndTime || 'Δεν oρίστηκε'}</span></p></div>
                </div>
                <h2>Στοιχεία Συσκευασίας</h2>
                <div class="section">
                    <div class="input-row"><label>τμχ/σακουλάκι:</label><p><span class="admin-info">${data.itemsPerBag || 'Δεν oρίστηκε'}</span></p></div>
                    <div class="input-row"><label>Σακουλάκι:</label><p><span class="admin-info">${data.bags || 'Δεν oρίστηκε'}</span></p></div>
                </div>
                <div ${role === 'user' ? '' : 'style="display: none;"'}>
                    <button class="prep-material-btn" onclick="openMaterialPrep()">Φόρμα Προετοιμασίας Υλικού</button>
                </div>
            `;
        } else {
            // Για admin, φόρτωση ως πεδία
            document.getElementById('client').value = data.client || '';
            document.getElementById('mold').value = data.mold || '';
            document.getElementById('deliveryDate').value = data.deliveryDate || '';
            document.getElementById('cyclesPerShot').value = data.cyclesPerShot || '';
            document.getElementById('gramsPerShot').value = data.gramsPerShot || '';
            document.getElementById('gramsPerItem').value = data.gramsPerItem || '';
            document.getElementById('itemsPerShot').value = data.itemsPerShot || '';
            document.getElementById('blockedCavities').value = data.blockedCavities || '';
            document.getElementById('material').value = data.material || '';
            document.getElementById('items').value = data.items || '';
            document.getElementById('totalMaterial').value = data.totalMaterial || '';
            document.getElementById('color').value = data.color || '';
            document.getElementById('hours').value = data.hours || '';
            document.getElementById('startTime').value = data.startTime || '';
            document.getElementById('estimatedEndTime').value = data.estimatedEndTime || '';
            document.getElementById('itemsPerBag').value = data.itemsPerBag || '';
            document.getElementById('bags').value = data.bags || '';
        }

        // Εάν δεν υπάρχουν δεδομένα και ο χρήστης είναι user, εμφάνιση μηνύματος
        if (role === 'user' && Object.keys(data).length === 0) {
            document.getElementById('container').innerHTML = '<h2>Η μηχανή δεν χρησιμοποιείται</h2>';
        }

        // Αποθήκευση δεδομένων και Νέα Παραγγελία
        function saveData() {
            if (role === 'admin') {
                const data = {
                    client: document.getElementById('client').value,
                    mold: document.getElementById('mold').value,
                    deliveryDate: document.getElementById('deliveryDate').value,
                    cyclesPerShot: document.getElementById('cyclesPerShot').value,
                    gramsPerShot: document.getElementById('gramsPerShot').value,
                    gramsPerItem: document.getElementById('gramsPerItem').value,
                    itemsPerShot: document.getElementById('itemsPerShot').value,
                    blockedCavities: document.getElementById('blockedCavities').value,
                    material: document.getElementById('material').value,
                    items: document.getElementById('items').value,
                    totalMaterial: document.getElementById('totalMaterial').value,
                    color: document.getElementById('color').value,
                    hours: document.getElementById('hours').value,
                    startTime: document.getElementById('startTime').value,
                    estimatedEndTime: document.getElementById('estimatedEndTime').value,
                    itemsPerBag: document.getElementById('itemsPerBag').value,
                    bags: document.getElementById('bags').value,
                    timestamp: new Date().toLocaleString()
                };
                localStorage.setItem('machineData_' + machineName, JSON.stringify(data));
                alert('Δεδομένα αποθηκεύτηκαν!');
            }
        }

        function newOrder() {
            if (role === 'admin') {
                document.getElementById('client').value = '';
                document.getElementById('mold').value = '';
                document.getElementById('deliveryDate').value = '';
                document.getElementById('cyclesPerShot').value = '';
                document.getElementById('gramsPerShot').value = '';
                document.getElementById('gramsPerItem').value = '';
                document.getElementById('itemsPerShot').value = '';
                document.getElementById('blockedCavities').value = '';
                document.getElementById('material').value = '';
                document.getElementById('items').value = '';
                document.getElementById('totalMaterial').value = '';
                document.getElementById('color').value = '';
                document.getElementById('hours').value = '';
                document.getElementById('startTime').value = '';
                document.getElementById('estimatedEndTime').value = '';
                document.getElementById('itemsPerBag').value = '';
                document.getElementById('bags').value = '';
                alert('Τα πεδία καθαρίστηκαν για νέα παραγγελία!');
            }
        }

        function openMaterialPrep() {
            if (role === 'user') {
                window.location.href = `material-prep.html?name=${encodeURIComponent(machineName)}`;
            }
        }

        function openSidebar() {
            document.getElementById("sidebar").style.width = "250px";
        }

        function closeSidebar() {
            document.getElementById("sidebar").style.width = "0";
        }

        function goBack() {
            window.location.href = "welcome.html";
        }

        function logout() {
            sessionStorage.clear();
            window.location.href = "index.html";
        }
    </script>
</body>
</html>
